# ZMMLC - MML Compiler

                                                   by Zhidao

------------------------------------------------------------
### 【1.ZMMLCとは】

ZMMLCは、テキストで記述されたMML(Music Macro Language)ソース
を解析し、標準MIDIファイル(Standerd MIDI File, SMF)を出力する
MMLコンパイラです。
MIDIデータを演奏するためのものではありません。作成したデータ
を聴くためには、別途プレイヤーが必要となります。

MML(Music Macro Language)は、演奏情報を記述するための特殊な言
語です。多少のMIDIに関する知識をお持ちならば、楽譜を書くのと
同じ感覚でどなたでも簡単に音楽を表現することができます。

MMLには標準規格がありません。ZMMLCは一般的なMML処理系との互換
性を概ね維持するよう努めておりますが、一部に独自の表記法や機
能を採用しております。ご了承下さい。

ZMMLCで採用しているMMLの特徴

 - 最小限の予約語セット＋マクロによる実装→柔軟なマクロ記述が可能
 - 引数付きマクロ定義可
 - チャンネル分割記述可
 - 多連符(ネスト可)
 - ホールド長指定可
 - 複数行リピート可
 - format 0/1で保存可
 - 様々なグラデーションパターン

------------------------------------------------------------
### 【2.アーカイブ内容】

本アーカイブには、

 - README    このファイル
 - zmmlc.txt ZMMLC使い方マニュアル
 - test.mml  サンプルMMLソース
 - makefile
 - src/      ソースディレクトリ
 - include/  ヘッダファイルディレクトリ
 
が含まれています。

------------------------------------------------------------
### 【3.インストール方法】

% make

で、実行ファイルzmmlcが出来ます。
Ubuntu 18.04LTS、GCC 7.5.0でコンパイルできることを確認してい
ます。

------------------------------------------------------------
### 【4.著作権及び免責事項】

ZMMLCは著作権を放棄しないフリーウェアです。全ての著作権は作
成者であるZhidaoが所有します。
雑誌やウェブサイト上での配布・転載は自由にして頂いて構いませ
んが、ご連絡頂けると嬉しいです。またアーカイブの改変、有料サ
イトでの公開、営利目的での使用はいかなる理由があっても不可と
させて頂きます。

個人的使用の範囲内でのソース改造等はもちろん、改造したソース
を元に作成したソフトの公開についても制限しませんが、是非ご一
報頂ければと思います。

本ソフトをご使用になった結果起こったいかなる事態に対しても、
作成者は責任を負いませんのでご了承下さい。

------------------------------------------------------------
### 【5.謝辞】

デバッグにご協力頂いたMash氏と、私がこのコンパイラを作るまで
愛用させて頂きましたMMLコンパイラ"MC"の作者江頭(えが)さんに
御礼申し上げます。

------------------------------------------------------------
### 【7.履歴】

 - 2020.10.26. UTF-8対応。fgets返り値チェック。sprintfをstrcpy
             に変更。READMEをmarkdown形式に修正。
 - 2004. 5.16. ver3.2。引数付きマクロの登録部にエラーがあった
            のを修正。
 - 2003. 7.25. ver3.1。コーダ指定実装。
 - 2003. 7.24. ver3.0。複数行にまたがる繰り返し指定の実装。コ
            ンパイル時マスク指定のネストに対応。
 - 2003. 7.23. ver2.5。コードを整理。機能上の差異はなし。
 - 2003. 7.12. ver2.4。異常終了時のテンポラリファイル削除。エ
            ラー出力時にバッファオーバーフローが起こるバグ修正。
 - 2003. 6.17. ver2.3。ロケール選択に関するバグ修正。
 - 2003. 6.14. ver2.2。コードを整理。機能上の差異はなし。
 - 2003. 6.13. ver2.1。メタクラス構造体の仕様変更。
 - 2003. 6.13. ver2.0。イベントリスト処理の効率向上、マクロ解
            凍とチャンネルコマンド逆引の高速化により、コンパイ
            ル速度向上、スタックオーバーフロー回避。
            コード中にちらほら見られた無駄も修正。
 - 2003. 6.10. ver2.0β作成。
 - 2002. 2.26. ver1.07。トラックとイベントリストの扱いに関する
            仕様変更(format 1でのコンパイル速度向上のための布石。)
 - 2002. 1.19. ver1.06。システムエクスクルーシブに関するバグ修正。
            拍子指定に関するバグ修正。
 - 2002. 1.10. ver1.05。ゲートタイム(q)、同期(#sync)に関する仕
            様変更。format指定ミスへの対処に関するバグ修正。
 - 2001.12.13. ver1.04。リピート、連符に関するオクターブ管理の
            仕様変更。Rolandエクスクルーシブのチェックサム計算
            に関するバグ修正。
 - 2001.12. 2. ver1.03a。マスク処理に関するバグを修正。
 - 2001.12. 1. ver1.03。複数音の同時消音処理に関するバグを修正。
 - 2001.11.27. ver1.02。チャンネル分割でタイムスタンプが正しく
            更新されないバグを修正。
 - 2001.11.20. ver1.01。エラー出力に関するデバッグ。
 - 2001.10.23. ver1.00a。エラー出力に関して若干修正(機能に差は
            ありません)。
 - 2001.10.18. ver1.00。構文解析に関するバグを修正。
            unplay,mask,unmaskコマンド及びLマクロを付加。
 - 2001.10.16. ver0.99βb、マルチポートに対応。
            channelコマンドをplayコマンドに変更。
 - 2001.10.11. ver0.99βa、連符のバグを修正。
 - 2001.10. 8. ver0.99β、Webページ上にて公開。
 - 2001. 9.15. ver0.99β作成。
